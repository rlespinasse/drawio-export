= Draw.io Export

image:https://img.shields.io/docker/v/rlespinasse/drawio-export[Docker Version,link=https://hub.docker.com/r/rlespinasse/drawio-export]
image:https://img.shields.io/docker/pulls/rlespinasse/drawio-export[Docker Pull,link=https://hub.docker.com/r/rlespinasse/drawio-export]
image:https://github.com/rlespinasse/drawio-export/workflows/Build/badge.svg[Build]

Export Draw.io diagrams using docker

== Features

* Recursive export
* Partial export (newer, or based on git reference)
* Additional export formats with link extraction

== Supported Export formats

* **draw.io** export formats : jpg, pdf, png, svg, vsdx, and xml
* **drawio-exporter** additional formats
** adoc - Export in png and create an additional asciidoc file (with support external links).

== Installation

[source,bash]
----
docker pull rlespinasse/drawio-export
----

== Usage

.Print the available options
[source,bash]
----
docker run -it rlespinasse/drawio-export --help
----

.Simple run with default options
[source,bash]
----
$ cd directory-with-drawio-files
$ docker run -it -v $(pwd):/data rlespinasse/drawio-export
+ export file : ./file1.drawio
++ export page 1 : Page-1
+++ generate pdf file
++ export page 2 : Page 2
+++ generate pdf file
----

== Integrations

.GitHub Action : Export and commit your draw.io files
[%collapsible]
====
..github/workflows/drawio-export.yaml
[source,yaml]
----
name: Keep draw.io export synchronized
on:
  push:
    branches:
      - main
    paths:
      - "**.drawio"
      - .github/workflows/drawio-export.yml
jobs:
  drawio-export:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout sources
        uses: actions/checkout@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}

      - name: Export drawio files to asciidoctor and png files
        uses: docker://rlespinasse/drawio-export:<VERSION>
        with:
          args: --format adoc --output drawio-assets --transparent

      - name: Get author and committer info from HEAD commit
        uses: rlespinasse/git-commit-data-action@v1.x

      - name: Commit changed files
        uses: stefanzweifel/git-auto-commit-action@v4.9.2
        with:
          commit_message: "docs: sync draw.io exported files"
          commit_user_name: "${{ env.GIT_COMMIT_COMMITTER_NAME }}"
          commit_user_email: "${{ env.GIT_COMMIT_COMMITTER_EMAIL }}"
          commit_author: "${{ env.GIT_COMMIT_AUTHOR }}"
----
====

== Contributing

Pull requests are welcome.
For major changes, please open an issue first to discuss what you would like to change.

Please make sure to update tests as appropriate.
